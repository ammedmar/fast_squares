
\section{New formulas} \label{s:formulas}

In this section we introduce our new description of cup-$i$ coproducts.
We define them for simplicial complexes although there is no obstruction interpreting these formulas as defining cup-$i$ coproducts on simplicial sets \cite{friedman2012simplicial}, a more general notion.

Let $X$ be a simplicial complex and $x \in X_n$.
For a set
\begin{equation*}
U = \{u_1 < \dots < u_r\} \subseteq \{0, \dots, n\}
\end{equation*}
we use the notation $d_U(x) = d_{u_1} \ldots\, d_{u_r}(x)$, with $d_{\emptyset}(x) = x$.

\begin{definition} \label{d:cup-i coproducts}	
	For any simplicial complex $X$ and an integer $i$, the \textit{cup-$i$ coproduct}
	\begin{equation*}
	\Delta_i : C_\bullet(X; \F_2) \to C(X; \F_2)^{\otimes 2}_\bullet
	\end{equation*}
	is the linear map defined on a basis element $x \in X_n$ to be $0$ if $i \not\in \{0, \dots, n\}$ and otherwise by
	\begin{equation} \label{equation: simplicial cup-i coproducts}
	\Delta_i(x) = \sum d_{U^0}(x) \otimes d_{U^1}(x),
	\end{equation}
	where the sum is taken over all sets $U = \{u_1 < \cdots < u_{n-i}\}$ with $u_j \in \{0, \dots, n\}$ and where
	\begin{equation*}
	U^0 = \{u_j \in U\ |\ u_j \equiv j \text{ mod } 2\}, \qquad
	U^1 = \{u_j \in U\ |\ u_j \not\equiv j \text{ mod } 2\}.
	\end{equation*}
\end{definition}

\begin{example}
	For any $x \in X_n$ and $i = 0$ the formula above reduces to
	\begin{equation*}
	\Delta_0(x) = \sum_{i=0}^n d_{i+1} \cdots d_{n}(x) \otimes d_{0} \cdots d_{i-1}(x),
	\end{equation*}
	a map known as Alexander-Whitney diagonal and widely used to define the algebra structure on cohomology.
\end{example}

\begin{example}
	For any basis element $x \in X_n$ we have
	\begin{equation*}
	\Delta_n(x) = x \otimes x,
	\end{equation*}
	implying that $Sq^0$ is the identity in cohomology.
\end{example}

\begin{theorem}
	The maps introduced in Definition~\ref{d:cup-i coproducts} define a cup-$i$ construction.
\end{theorem}

Since by the previous examples the maps are not identically zero, we need to check they are natural with respect to simplicial maps and that they satisfy \eqref{e:boundary of cup-i}.
We state these claims as a pair of lemmas.

\begin{lemma}
	If $f$ is a simplicial map, then, for every $i \in \Z$,
	\begin{equation*}
	\Delta_i \circ f_\bullet = (f_\bullet \otimes f_\bullet) \circ \Delta_i.
	\end{equation*}
\end{lemma}

\begin{proof}
	Consider a basis element $x = [v_0, \dots, v_n]$ and first assume that $f_\bullet(x)$ is not $0$.
	Then, for any subset $U$ of $\{0, \dots, n\}$ the image of $d_U(x)$ is not $0$ as well and we have
	\begin{align*}
	\Delta_i \circ f_\bullet(x) =\ &
	\Delta_i \big([f(v_0), \dots, f(v_n)]\big) \\ =\ &
	\sum d_{U^0} \big([f(v_0), \dots, f(v_n)]\big) \otimes d_{U^1} \big([f(v_0), \dots, f(v_n)]\big) \\ =\ &
	(f_\bullet \otimes f_\bullet) \sum d_{U^0} \big([v_0, \dots, v_n]\big) \otimes d_{U^1} \big([v_0, \dots, v_n]\big) \\ =\ &
	(f_\bullet \otimes f_\bullet) \circ \Delta(x).
	\end{align*}
	If $f_\bullet(x) = 0$ then there exists consecutive elements $v_j$ and $v_{j+1}$ with $f(v_j) = f(v_{j+1})$.
	To prove that $(f_\bullet \otimes f_\bullet) \circ \Delta(x) = 0$ it suffices to show that for any $U \in \P_{n-i}(n)$ either the simplex $f \big(d_{U^0}(x) \big)$ or $f \big( d_{U^1}(x) \big)$ contains both $v_j$ and $v_{j+1}$.
	If $U$ does not contain both $j$ and $j+1$ this is immediate.
	If it does we have that	$j, j+1 \in U^0$ or $j, j+1 \in U^1$ since they are consecutive so $\ind_U(i) = \ind_U(i+1)$.
\end{proof}

\begin{lemma} \label{l:main}
	For any integer $i$,
	\begin{equation} \label{eq: cup-i coproducts boundary relation}
	\partial \circ \Delta_{i} + \Delta_{i+1} \circ \partial = (1 +T ) \Delta_{i-1}.
	\end{equation}
\end{lemma}

We devote Section~\ref{s:proof} to the proof of this theorem.